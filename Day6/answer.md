## День 6. Ответы на вопросы.
1. Исключения в PHP - это механизм обработки ошибок, который позволяет более элегантно обрабатывать и контролировать ошибки в вашем коде. Когда возникает критическая ситуация или ошибка, вы можете выбросить исключение, чтобы указать на проблему, и затем ловить (обрабатывать) это исключение в коде.
    - **Выброс исключения:** Когда ваш код сталкивается с ошибкой или непредвиденной ситуацией, он может вызвать исключение с помощью ключевого слова **throw**.<br>
    **throw new Exception("Ошибка: деление на ноль невозможно.");**
    - **Ловля исключения:** Вы можете использовать конструкцию **try-catch** для перехвата и обработки исключений.<br>
    ```php
    try {
    //Код, который может вызвать исключение
    } catch (Exception $e) {
    // Обработка исключения
    echo "Произошла ошибка: " . e->getMessage();
    }
    ```
    - **Обработка необработанных исключений:** Если исключение не было поймано в коде, оно будет передано обработчику верхнего уровня, и если таковой не определен, то будет выведено сообщение об ошибке.
2. Ответ частично совпадает с первым вопросом. Но могу добавить:
    - **Использование функций обработки ошибок:**<br>
     PHP предоставляет набор функций для управления ошибками, таких как **set_error_handler(), error_reporting(), trigger_error()** и другие. Эти функции позволяют настраивать поведение обработки ошибок и вывода сообщений об ошибках.
    - **Использование проверки ошибок:**<br>
    Вы можете проверять ошибки в коде с помощью оператора **if, switch и т.д.**, и предпринимать действия в зависимости от наличия ошибок.
3. **Исключения и ошибки** - это два разных концепта в программировании, но они часто используются в контексте обработки непредвиденных ситуаций или проблем в коде. Вот их основные различия:
    - **Исключения**:<br>
    Исключения - это механизм обработки ошибок, который позволяет коду сообщать о непредвиденных ситуациях, которые могут привести к проблемам во время выполнения.<br>
    Они обычно вызываются с помощью ключевого слова **throw** и перехватываются с помощью блока **try-catch**.<br>
    Исключения обычно используются для критических ошибок, которые не могут быть обработаны на месте, и требуют дополнительных действий для их исправления.<br>
    - **Ошибки**: <br>
    Ошибки - это проблемы, возникающие в ходе выполнения программы, которые могут быть вызваны различными факторами, такими как некорректный ввод, недоступность ресурсов и т. д.<br>
    Ошибки могут быть критическими (fatal errors), которые приводят к прерыванию выполнения программы, или предупреждениями (warnings), которые могут быть игнорированы или обработаны.<br>
    Ошибки обычно связаны с некорректным использованием функций или неверными данными.<br>
4. Блоки **try** и **catch** используются в PHP для обработки исключений. Вот пример использования блоков try и catch:
    ```php
    try {
    // Код, который может вызвать исключение
    $result = 10 / 0; // Деление на ноль вызовет исключение
    } catch (Exception $e) {
    // Обработка исключения
    echo "Произошла ошибка: " . $e->getMessage();
    }

    //Так же может быть несколько блоков catch:
    try {
    // Код, который может вызвать исключение
    } catch (FileNotFoundException $e) {
    // Обработка исключения FileNotFoundException
    } catch (IOException $e) {
    // Обработка исключения IOException
    } catch (Exception $e) {
    // Обработка остальных исключений
    }
    ```
5. Блок **finally** - используется вместе с блоком **try-catch** для выполнения кода независимо от того, произошло исключение или нет.
    - **Выполнение кода независимо от исключений**: Код в блоке **finally** выполнится независимо от того, было ли выброшено исключение в блоке **try** или нет. Даже если исключение было перехвачено и обработано в блоке **catch**, код в блоке **finally** все равно будет выполнен.
    - **Освобождение ресурсов**: Блок **finally** часто используется для освобождения ресурсов или выполнения действий по очистке после выполнения кода в блоке **try** или **catch**. Например, закрытие файла, закрытие соединения с базой данных или удаление временных файлов.
    - Пример использования блока **finally**:
    ```php
    try {
    // Код, который может вызвать исключение
    } catch (Exception $e) {
    // Обработка исключения
    } finally {
    // Код, который будет выполнен в любом случае
    // Например, закрытие файла или освобождение ресурсов
    }
    ```
6. Можно создать пользовательское исключение, чтобы предоставить более специфическую информацию о проблеме, которая может возникнуть в вашем коде. Для создания исключения можно использовать новый класс, который расширяет встроенный класс исключения **Exception** или любой другой класс исключения по вашему выбору. Вот пример создания пользовательского исключения:
    ```php
    // Определение пользовательского исключения
    class CustomException extends Exception {
    public function errorMessage() {
        // Специфическое сообщение об ошибке для пользовательского исключения
        return "Произошла ошибка: " . $this->getMessage();
        }
    }

    // Генерация пользовательского исключения
    function divide($numerator, $denominator) {
    if ($denominator === 0) {
        throw new CustomException("Деление на ноль невозможно");
        } else {
        return $numerator / $denominator;
        }
    }

    // Обработка пользовательского исключения
    try {
    $result = divide(10, 0);
    } catch (CustomException $e) {
    // Вывод сообщения об ошибке
    echo $e->errorMessage();
    }
    ```
7.  В PHP существуют различные уровни ошибок, которые могут возникать в процессе выполнения вашего кода. Эти уровни ошибок определяются директивой **error_reporting** и могут быть установлены в файле конфигурации PHP (например, php.ini) или программно с помощью функции **error_reporting()**.
    - E_ERROR: Критическая ошибка, которая приводит к прерыванию выполнения скрипта.
    - E_WARNING: Предупреждение, которое указывает на потенциальные проблемы в коде, но не прерывает его выполнение.
    - E_NOTICE: Уведомление о незначительных проблемах.
    - E_PARSE: Ошибка синтаксиса, которая возникает при разборе скрипта перед выполнением.
    - E_DEPRECATED: Уведомление о использовании устаревших элементов PHP.
    - E_STRICT: Дополнительные уведомления о стиле кода и рекомендации по его улучшению.
    - E_ALL: Включает все типы ошибок и предупреждений, кроме уровня E_STRICT.
8. В PHP вы можете изменить обработчик ошибок с помощью функции **set_error_handler()**. Эта функция позволяет установить пользовательскую функцию обработчика ошибок, которая будет вызываться при возникновении ошибки в вашем коде. Вот пример использования **set_error_handler()**:
    ```php
    // Определение пользовательской функции обработчика ошибок
    function customErrorHandler($errno, $errstr, $errfile, $errline) {
    echo "Произошла ошибка: [$errno] $errstr в файле $errfile на строке $errline<\n>";
    }

    // Установка пользовательской функции в качестве обработчика ошибок
    set_error_handler("customErrorHandler");
    ```
9.  - **error_reporting** - это встроенная директива в PHP, которая управляет тем, какие типы ошибок  и предупреждений будут отображаться или логироваться во время выполнения скрипта. Эта директива определяет уровень отчетности об ошибках.
Уровни отчетности об ошибках представлены числовыми константами в PHP, такими как **E_ALL, E_ERROR, E_WARNING, E_NOTICE** и другими. Каждая константа представляет собой битовую маску, которая соответствует определенным типам ошибок.
Вы можете установить значение **error_reporting** в файле конфигурации PHP (например, php.ini) или программно в вашем коде с помощью функции **error_reporting()**. Вот пример использования **error_reporting()**:
    ```php
    // Установка уровня отчетности об ошибках в файле php.ini
    error_reporting = E_ALL

    // Установка уровня отчетности об ошибках программно в PHP коде
    error_reporting(E_ALL);
    ```
10. Для того чтобы записать ошибки в лог-файл используется функция - **error_log()**
    ```php
    // Установка пути к лог-файлу
    $logFile = '/path/to/error.log';

    // Отправка сообщения об ошибке в лог-файл
    $errorMsg = "Произошла критическая ошибка!";
    error_log($errorMsg, 3, $logFile);
    ```